---
title: "Geojson Testing"
output: html_notebook
---

### Setup

#### Packages

```{r}
# Packages
require(ggplot2)
require(plotly)
require(geojsonio)
require(sp)
require(sf)
```

#### Functions

```{r}
# Given a geojson file, return an SF object for plotting
geojson_sf <- 
  function(file){
    data <- geojson_read(file, what = "sp")
    return(st_as_sf(data))
  }
```


#### Data


```{r}
# Download file

url = "https://opendata.arcgis.com/datasets/5f45e1ece6e14ef5866974a7b57d3b95_1.geojson"

file = "NJ_counties.geojson"

download.file(url,file)
```

### Graphs 

```{r}

# Population heat maps of NJ

NJ_Counties_Cleaned <- 
  NJ_Counties %>%
  transmute(
    county = COUNTY,
    CO = CO,
    pop = POP2010,
    popdensity = POPDEN2010,
    Shape_Length = Shape_Length,
    Shape_Area = Shape_Area,
    GNIS = GNIS
  )

NJ <-
  NJ_Counties_Cleaned %>%
  ggplot() +
  geom_sf(aes(color = county,fill = pop)) +
  theme(legend.position = "None")

ggplotly(NJ)


plot(NJ_Counties_Cleaned["pop"])
```

